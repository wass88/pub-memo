<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0" class="jsx-623298bfa1ba202e"/><meta name="format-detection" content="telephone=no,address=no,email=no" class="jsx-623298bfa1ba202e"/><meta http-equiv="X-UA-Compatible" content="IE=edge" class="jsx-623298bfa1ba202e"/><title>[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる - wassのメモ書き</title><meta name="description" content="[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる -- 訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@wass80"/><meta name="twitter:title" content="[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる - wassのメモ書き"/><meta name="twitter:description" content="[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる -- 訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？"/><meta name="twitter:image" content="https://memo.wass80.xyz/icon.png"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;🎯&lt;/text&gt;&lt;/svg&gt;"/><meta name="next-head-count" content="12"/><link rel="preload" href="/_next/static/css/065f1c927b37ad0a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/065f1c927b37ad0a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-5752944655d749a0.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-2adf9f78c56c2103.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0895ed5d09b80cf0.js" defer=""></script><script src="/_next/static/chunks/175675d1-f160d4a5df49f5d3.js" defer=""></script><script src="/_next/static/chunks/3607272e-e8679f825f935b02.js" defer=""></script><script src="/_next/static/chunks/598-45d119a86f05bd0d.js" defer=""></script><script src="/_next/static/chunks/566-ee33ddc149fb42c4.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-ea27f4621aa69999.js" defer=""></script><script src="/_next/static/Zd2yrcSyvQ06Q0UleL3dV/_buildManifest.js" defer=""></script><script src="/_next/static/Zd2yrcSyvQ06Q0UleL3dV/_ssgManifest.js" defer=""></script><style id="__jsx-3bd76abe47806f9">a.jsx-3bd76abe47806f9{color:var(--main-fg-color);text-shadow:1px 1px var(--main-color)}a.jsx-3bd76abe47806f9:hover{text-shadow:1px 1px var(--main-color),-1px -1px var(--main-color)}</style><style id="__jsx-a20cfd9621c39a29">.tags.jsx-a20cfd9621c39a29{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;gap:8px;position:absolute;bottom:1rem;left:3rem;right:3rem;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end}.chip.jsx-a20cfd9621c39a29{color:var(--sub-lighter-color);font-weight:bold}.chip-cont.jsx-a20cfd9621c39a29:hover{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}.icon.jsx-a20cfd9621c39a29{margin-left:auto;font-size:1.5rem;margin-bottom:-.3rem}</style><style id="__jsx-6932c36d70dc94db">.card.jsx-6932c36d70dc94db{width:-webkit-calc((960px - 3rem)/2);width:-moz-calc((960px - 3rem)/2);width:calc((960px - 3rem)/2);height:100%;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column;flex-flow:column;position:relative;-webkit-box-shadow:-2px 0 var(--main-color),-4px 0#000,-8px 0 var(--main-color),2px 0 var(--main-color),4px 0#000,8px 0 var(--main-color),-2px 1px var(--main-color)inset,2px 1px var(--main-color)inset,-2px -1px var(--main-color)inset,2px -1px var(--main-color)inset;-moz-box-shadow:-2px 0 var(--main-color),-4px 0#000,-8px 0 var(--main-color),2px 0 var(--main-color),4px 0#000,8px 0 var(--main-color),-2px 1px var(--main-color)inset,2px 1px var(--main-color)inset,-2px -1px var(--main-color)inset,2px -1px var(--main-color)inset;box-shadow:-2px 0 var(--main-color),-4px 0#000,-8px 0 var(--main-color),2px 0 var(--main-color),4px 0#000,8px 0 var(--main-color),-2px 1px var(--main-color)inset,2px 1px var(--main-color)inset,-2px -1px var(--main-color)inset,2px -1px var(--main-color)inset;padding:1rem 3rem 1rem 3rem}.card.jsx-6932c36d70dc94db h2.jsx-6932c36d70dc94db{color:var(--sub-lighter-color);padding:0;margin:0;line-height:1.5;font-size:1.5rem}.card.jsx-6932c36d70dc94db:hover{-webkit-transform:translate(2px,2px);-moz-transform:translate(2px,2px);-ms-transform:translate(2px,2px);-o-transform:translate(2px,2px);transform:translate(2px,2px)}p.jsx-6932c36d70dc94db{margin:1rem 0 2.5rem 0;opacity:95%;font-weight:bold}@media screen and (max-width:960px){.card.jsx-6932c36d70dc94db{width:initial}}</style><style id="__jsx-29b45875ab8846a1">.column.jsx-29b45875ab8846a1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-flow:row wrap;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;gap:2rem 3rem}@media screen and (max-width:960px){.column.jsx-29b45875ab8846a1{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-flow:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-flow:column;flex-flow:column}}</style><style id="__jsx-2421c33cd1acb0d2">aside.jsx-2421c33cd1acb0d2{margin-top:3rem}.sub-info.jsx-2421c33cd1acb0d2{margin:-36px 0 16px 0;font-size:75%}nav.jsx-2421c33cd1acb0d2{margin-top:32px}</style><style id="__jsx-623298bfa1ba202e">*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0}:root{--main-color:#6eb488;--sub-light-color:#7ff0aa;--sub-darker-color:#3a6746;--sub-dark-color:#6eb488;--sub-lighter-color:#e8f4d9;--fg-color:var(--sub-lighter-color);--jump:16px}html{font-family:"Helvetica Neue",Arial,"Hiragino Kaku Gothic Pro","Yu Gothic Medium",YuGothic,"メイリオ",sans-serif;font-size:var(--jump);line-height:2;color:var(--fg-color);background-color:#050505;background-image:-webkit-linear-gradient(315deg,#001006 25%,transparent 25%),-webkit-linear-gradient(225deg,#001006 25%,transparent 25%),-webkit-linear-gradient(45deg,#001006 25%,transparent 25%),-webkit-linear-gradient(135deg,#001006 25%,#050505 25%);background-image:-moz-linear-gradient(315deg,#001006 25%,transparent 25%),-moz-linear-gradient(225deg,#001006 25%,transparent 25%),-moz-linear-gradient(45deg,#001006 25%,transparent 25%),-moz-linear-gradient(135deg,#001006 25%,#050505 25%);background-image:-o-linear-gradient(315deg,#001006 25%,transparent 25%),-o-linear-gradient(225deg,#001006 25%,transparent 25%),-o-linear-gradient(45deg,#001006 25%,transparent 25%),-o-linear-gradient(135deg,#001006 25%,#050505 25%);background-image:linear-gradient(135deg,#001006 25%,transparent 25%),linear-gradient(225deg,#001006 25%,transparent 25%),linear-gradient(45deg,#001006 25%,transparent 25%),linear-gradient(315deg,#001006 25%,#050505 25%);background-position:10px 0,10px 0,0 0,0 0;-webkit-background-size:20px 20px;-moz-background-size:20px 20px;-o-background-size:20px 20px;background-size:20px 20px;background-repeat:repeat}body{height:100vh}.container{padding-bottom:16px}h1{font-size:400%;line-height:1.25;font-weight:bold;padding:-webkit-calc(3*var(--jump))0;padding:-moz-calc(3*var(--jump))0;padding:calc(3*var(--jump))0;--stripe-color:var(--sub-light-color);background-color:var(--main-color);background-image:-webkit-linear-gradient(left,transparent 50%,var(--stripe-color)50%);background-image:-moz-linear-gradient(left,transparent 50%,var(--stripe-color)50%);background-image:-o-linear-gradient(left,transparent 50%,var(--stripe-color)50%);background-image:linear-gradient(90deg,transparent 50%,var(--stripe-color)50%);-webkit-background-size:3px 30px;-moz-background-size:3px 30px;-o-background-size:3px 30px;background-size:3px 30px;-webkit-background-clip:text;background-clip:text;color:transparent;margin-top:-8px;margin-bottom:-36px}h2{font-size:200%;text-shadow:1px 1px var(--sub-darker-color);margin-top:10px;margin-bottom:6px}h3{font-size:150%;margin-top:12px;margin-bottom:4px}.inner{max-width:960px;margin:0 auto}p{-webkit-margin-after:1rem;margin-block-end:1rem}@media screen and (max-width:960px){.inner{padding:0 16px}h1{font-size:200%}}a{text-decoration:inherit;color:inherit}a:hover{color:inherit}a:visited{color:inherit}ul{-webkit-padding-start:1rem;-moz-padding-start:1rem;padding-inline-start:1rem;-webkit-margin-after:1rem;margin-block-end:1rem}ul>ul{-webkit-margin-after:0;margin-block-end:0}</style></head><body><div id="__next" data-reactroot=""><div class="jsx-623298bfa1ba202e container"><div class="jsx-623298bfa1ba202e inner"><main class="jsx-623298bfa1ba202e"><a class="jsx-2421c33cd1acb0d2" href="/2023-05-26-poisson-collision/"><h1 class="jsx-2421c33cd1acb0d2">[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる</h1></a><div class="jsx-2421c33cd1acb0d2 sub-info"><span class="jsx-2421c33cd1acb0d2">作成日: <!-- -->2023-05-26</span></div><main class="notion dark-mode notion-page notion-block-41b055907ee64ad28deff14ffd551a4d"><div class="notion-viewport"></div><h2 class="notion-h notion-h1 notion-default notion-h-indent-0 notion-block-8c067bbd7a0f4503a60260bff995224d" data-id="8c067bbd7a0f4503a60260bff995224d"><span><div id="8c067bbd7a0f4503a60260bff995224d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#8c067bbd7a0f4503a60260bff995224d" title="2023-05-29 訂正 どうやらルートぐらいしかよくならない"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2023-05-29 訂正 どうやらルートぐらいしかよくならない</span></span></h2><figure class="notion-asset-wrapper notion-asset-wrapper-tweet notion-block-1da3213b2c6a4744a34bb26c5d7d0e52"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><div style="max-width:420px;width:100%;margin-left:auto;margin-right:auto"><div></div></div></div></figure><div class="notion-text notion-default notion-block-ce0c10cc60594465877a8b1c552581ed">「リスクが1/Nになったら、N倍流せるようになる」が間違いです。√N倍しか流せない、という誕生日の直感が正しいです。</div><h2 class="notion-h notion-h1 notion-default notion-h-indent-0 notion-block-95bf1a27ffe044e3a04a83a430e6cfaa" data-id="95bf1a27ffe044e3a04a83a430e6cfaa"><span><div id="95bf1a27ffe044e3a04a83a430e6cfaa" class="notion-header-anchor"></div><a class="notion-hash-link" href="#95bf1a27ffe044e3a04a83a430e6cfaa" title="以下、誤りのある原文"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">以下、誤りのある原文</span></span></h2><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-a185a331aafa4a73bbbd3dbe27f0dbfc" href="https://topics.smt.docomo.ne.jp/article/itmedia_news/trend/itmedia_news-20230510_114?redirect=1"><div><div class="notion-bookmark-title">topics.smt.docomo.ne.jp</div><div class="notion-bookmark-description"></div><div class="notion-bookmark-link"><div class="notion-bookmark-link-text">https://topics.smt.docomo.ne.jp/article/itmedia_news/trend/itmedia_news-20230510_114?redirect=1</div></div></div></a></div><div class="notion-text notion-default notion-block-e449593bdacb4fffa347d408060a842d">コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。</div><div class="notion-text notion-default notion-block-42cf491e8e7849528413aa208a7a79f4">今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）</div><figure class="notion-asset-wrapper notion-asset-wrapper-tweet notion-block-5202dc6c5504497ab037a5288246f07f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><div style="max-width:420px;width:100%;margin-left:auto;margin-right:auto"><div></div></div></div></figure><div class="notion-text notion-default notion-block-692a39984e2b474ea1e6eb6cfc72a6ab">秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。</div><h3 class="notion-h notion-h2 notion-default notion-h-indent-1 notion-block-c8a389e3902a4fe68a3ca0247b13016e" data-id="c8a389e3902a4fe68a3ca0247b13016e"><span><div id="c8a389e3902a4fe68a3ca0247b13016e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c8a389e3902a4fe68a3ca0247b13016e" title="誕生日のパラドックスとは"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">誕生日のパラドックスとは</span></span></h3><div class="notion-text notion-default notion-block-284208a76de649b7bdd69595bcc6e8d2">「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。</div><span class="notion-equation notion-equation-block notion-block-9fea8aa625e94f4abfa20eb1d15ba7e9"><span></span></span><h3 class="notion-h notion-h2 notion-default notion-h-indent-1 notion-block-7c2f094365f34db48b82ca591ff2a7c8" data-id="7c2f094365f34db48b82ca591ff2a7c8"><span><div id="7c2f094365f34db48b82ca591ff2a7c8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7c2f094365f34db48b82ca591ff2a7c8" title="「何回起こるか」に答えてくれるポアソン分布"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">「何回起こるか」に答えてくれるポアソン分布</span></span></h3><div class="notion-text notion-default notion-block-50f486d6685146b98f4f20575b29f502">この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。</div><div class="notion-text notion-default notion-block-f46107e150dc457a9d4d4a110c57c40f">この問題を考えるには「単位時間に平均<span class="notion-equation notion-equation-inline"><span></span></span>回起こる事象がこの単位時間に<span class="notion-equation notion-equation-inline"><span></span></span>回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。</div><span class="notion-equation notion-equation-block notion-block-a30679dd040b4e60b4e9849be535b131"><span></span></span><h3 class="notion-h notion-h2 notion-default notion-h-indent-1 notion-block-3039a6aee4f44f0b83069203e5800d8f" data-id="3039a6aee4f44f0b83069203e5800d8f"><span><div id="3039a6aee4f44f0b83069203e5800d8f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#3039a6aee4f44f0b83069203e5800d8f" title="1秒間に衝突する確率の計算"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">1秒間に衝突する確率の計算</span></span></h3><div class="notion-text notion-default notion-block-2a742561a3bd4a36867297124beb106e">1秒間に衝突する確率<span class="notion-equation notion-equation-inline"><span></span></span>は1秒間に事象が0回か1回起こる確率の余事象です。</div><span class="notion-equation notion-equation-block notion-block-6234e4868a6e4b168ac7122996f14902"><span></span></span><div class="notion-text notion-default notion-block-5e4622dd57d640968c991fec82c1776c">途中で<span class="notion-equation notion-equation-inline"><span></span></span>として<span class="notion-equation notion-equation-inline"><span></span></span>をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。</div><h3 class="notion-h notion-h2 notion-default notion-h-indent-1 notion-block-c2bbee805cc542dc9d722ac5930d7d47" data-id="c2bbee805cc542dc9d722ac5930d7d47"><span><div id="c2bbee805cc542dc9d722ac5930d7d47" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c2bbee805cc542dc9d722ac5930d7d47" title="衝突を1/x秒間に改善したときの衝突する確率の計算"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">衝突を1/x秒間に改善したときの衝突する確率の計算</span></span></h3><div class="notion-text notion-default notion-block-67bc0c33ee60499f99b25d8d566571b3">1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率<span class="notion-equation notion-equation-inline"><span></span></span>を求めると、pのλがλ/xになるので次の式になります。</div><span class="notion-equation notion-equation-block notion-block-5f60ce22df144bfe9b19d112361de51e"><span></span></span><div class="notion-text notion-default notion-block-fcd8131e8814453cabf3fd038166aa42">1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。</div><span class="notion-equation notion-equation-block notion-block-b19422c6266042b1b4919e6dec45054a"><span></span></span><div class="notion-text notion-default notion-block-39413f6aeeea473188790ccf03cc3444">途中で<span class="notion-equation notion-equation-inline"><span></span></span>としてテイラー近似しています。</div><div class="notion-text notion-default notion-block-5d17b19d9a17411ca9c669996c61bca8">以上より、1秒間をx分割したときに衝突するリスクは<span class="notion-equation notion-equation-inline"><span></span></span>と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。</div><h3 class="notion-h notion-h2 notion-default notion-h-indent-1 notion-block-d71a44eb98b74f9ba813693f8c2fa153" data-id="d71a44eb98b74f9ba813693f8c2fa153"><span><div id="d71a44eb98b74f9ba813693f8c2fa153" class="notion-header-anchor"></div><a class="notion-hash-link" href="#d71a44eb98b74f9ba813693f8c2fa153" title="実際の排他制御の問題"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">実際の排他制御の問題</span></span></h3><div class="notion-text notion-default notion-block-c66a69f6f18c49769eaeec54fe93454b">分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?</div><div class="notion-blank notion-block-eb6e9ee0ca754f8ba6c23cde5f057582"> </div></main><aside class="jsx-2421c33cd1acb0d2"><p class="jsx-2421c33cd1acb0d2"><a href="https://twitter.com/intent/tweet?text=%5B%E8%A8%82%E6%AD%A3%E3%81%82%E3%82%8A%5D%20%E7%A7%92%E5%8D%98%E4%BD%8D%E3%81%A7%E8%A1%9D%E7%AA%81%E3%81%99%E3%82%8B%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E3%82%92%E3%83%9F%E3%83%AA%E7%A7%92%E5%8D%98%E4%BD%8D%E3%81%AB%E6%94%B9%E5%96%84%E3%81%99%E3%82%8B%E3%81%A8%E3%80%811000%E5%80%8D%E5%AE%89%E5%85%A8%E3%81%AB%E3%81%AA%E3%82%8B%0Ahttps%3A%2F%2Fmemo.wass80.xyz%2F2023-05-26-poisson-collision" target="_blank" rel="noopener noreferrer" class="jsx-3bd76abe47806f9">Twitterで共有する</a></p><a class="jsx-2421c33cd1acb0d2" href="/"><h1 class="jsx-2421c33cd1acb0d2">最新の記事</h1></a><div class="jsx-29b45875ab8846a1 column"><a href="/2023-09-20-git-rebase-keep-base/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">git rebase -iで分岐元を自動指定するには--keep-baseで良い</h2><p class="jsx-6932c36d70dc94db">git rebase -i --keep-base mainをすると楽に歴史操作できる。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🔧</div></div></div></a><a href="/2023-09-05-pga-3d/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">投影幾何学的代数PGAによる3次元計算が楽で面白い</h2><p class="jsx-6932c36d70dc94db">行列とかクォータニオンとか3次元平面とか全部一緒くたにあつかえるすごいヤツ</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/math/"><div class="jsx-a20cfd9621c39a29 chip">math</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🧬</div></div></div></a><a href="/2023-07-02-yoneda-hom-functor/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">ようやく理解した米田の補題とHom関手</h2><p class="jsx-6932c36d70dc94db">圏論の基本と米田の補題がどう嬉しいのか。証明は書いてありません。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/math/"><div class="jsx-a20cfd9621c39a29 chip">math</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/category/"><div class="jsx-a20cfd9621c39a29 chip">category</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🔄</div></div></div></a><a href="/2023-05-26-poisson-collision/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる</h2><p class="jsx-6932c36d70dc94db">訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/math/"><div class="jsx-a20cfd9621c39a29 chip">math</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🎯</div></div></div></a><a href="/2023-05-24-kariuchi-solver/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">奈良時代のボドゲ「かりうち」のソルバー</h2><p class="jsx-6932c36d70dc94db">ショートカットが強すぎる気がしたので、モンテカルロ法のソルバーを書いた。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🤞</div></div></div></a><a href="/2023-05-19-b-plus-tree-database/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">B+木を実装してデータベースとRustのRefCellに詳しくなる</h2><p class="jsx-6932c36d70dc94db">Rustで簡単なデータベースを書く</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/rust/"><div class="jsx-a20cfd9621c39a29 chip">rust</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/web/"><div class="jsx-a20cfd9621c39a29 chip">web</div></a></object><div class="jsx-a20cfd9621c39a29 icon">📃</div></div></div></a><a href="/2023-05-02-nearest-fraction-table/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">最も近い分数を探す表 ― 29%は「3人に1人」ではなく「7人に2人」 </h2><p class="jsx-6932c36d70dc94db">小数とそれに近い分数の表</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/math/"><div class="jsx-a20cfd9621c39a29 chip">math</div></a></object><div class="jsx-a20cfd9621c39a29 icon">➗</div></div></div></a><a href="/2023-01-10-pencil-puzzle-sugar/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">ペンシルパズルを自作して、唯一解判定ソルバーをSugar CSPソルバで作る</h2><p class="jsx-6932c36d70dc94db">自作ペンパの作成補助ツールを書いた</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/puzzle/"><div class="jsx-a20cfd9621c39a29 chip">puzzle</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🧩</div></div></div></a><a href="/2022-12-20-osero-ororo/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">オセロ？オロロ？エロセ？オセロの変わったルールを大量に生成</h2><p class="jsx-6932c36d70dc94db">小谷善行さん発案のOSEROバリアントです。本家とは異なる実装です。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">⭐</div></div></div></a><a href="/2022-12-08-zsh-ctrl-c-recover/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">zshでミスってCtrl-Cをして、空っぽになった入力を取り戻す</h2><p class="jsx-6932c36d70dc94db">うっかりキャンセルしたコマンドを再入力できるようにzshを設定する。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🧬</div></div></div></a><a href="/2022-12-05-shortcut-of-word/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">ショートカットでコマンドを入力すると、どんな環境でもそこそこ便利になる</h2><p class="jsx-6932c36d70dc94db">iterm2のショートカットで頻出単語を入力する</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dev/"><div class="jsx-a20cfd9621c39a29 chip">dev</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🍰</div></div></div></a><a href="/2022-10-29-repair-ih/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">壊れた卓上IHを自分で修理する</h2><p class="jsx-6932c36d70dc94db">IHのスイッチが壊れたので、自分ではんだ付けして直す。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dialy/"><div class="jsx-a20cfd9621c39a29 chip">dialy</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🔧</div></div></div></a><a href="/2022-10-28-vue-computed/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">Vueっぽいものを実装してComputedの仕組みを探る</h2><p class="jsx-6932c36d70dc94db">VueのComputedのやや魔法っぽい、依存関係の自動導出についての仕組みを、簡単な実装で解説しました。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/vue/"><div class="jsx-a20cfd9621c39a29 chip">vue</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/js/"><div class="jsx-a20cfd9621c39a29 chip">js</div></a></object><div class="jsx-a20cfd9621c39a29 icon">💚</div></div></div></a><a href="/2022-10-28-virtual-dom/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">仮想DOMの差分更新を簡単に実装する</h2><p class="jsx-6932c36d70dc94db">仮想DOMの簡単な実装を行いました。差分をみて必要なDOMの更新だけ取り出します。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/js/"><div class="jsx-a20cfd9621c39a29 chip">js</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🌌</div></div></div></a><a href="/2022-10-28-the-fools-question/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">教養動画における本当に何もわかってない道化の存在について</h2><p class="jsx-6932c36d70dc94db">何もわかっていな人が与える安心感と質問することについて。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dialy/"><div class="jsx-a20cfd9621c39a29 chip">dialy</div></a></object><div class="jsx-a20cfd9621c39a29 icon">❓</div></div></div></a><a href="/2022-10-25-rust-c-compiler/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">Rustで「低レイヤを知りたい人のためのCコンパイラ作成入門」を少しやる</h2><p class="jsx-6932c36d70dc94db">コンパイラ作りを思い出す</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/rust/"><div class="jsx-a20cfd9621c39a29 chip">rust</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/compiler/"><div class="jsx-a20cfd9621c39a29 chip">compiler</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🦀</div></div></div></a><a href="/2022-10-05-tictactoe-random/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">三目並べをランダムに指したときの先手の勝利確率は?</h2><p class="jsx-6932c36d70dc94db">まったくもってランダムに三目並べを行うときに先手はどれくらい有利か</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">⭕</div></div></div></a><a href="/2022-08-09-infinite-turtle-brainfuck/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">コンベアで計算する『Infinite Turtles』でBrainfuckインタプリタを実装した</h2><p class="jsx-6932c36d70dc94db">ベルトコンベアでbrainfuckを計算する様子</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🧠</div></div></div></a><a href="/2022-08-08-inifinite-turtles/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">自動化コンベアでチューリング完全を目指す『Infinite Turtles』の紹介</h2><p class="jsx-6932c36d70dc94db">steamのゲームの紹介。ベルトコンベアでいろんな問題を解く。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🐢</div></div></div></a><a href="/2022-08-07-ray-tracing-in-one-weekend/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">『Ray Tracing in One Weekend』をやった</h2><p class="jsx-6932c36d70dc94db">レイトレーシングを実装する</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/rust/"><div class="jsx-a20cfd9621c39a29 chip">rust</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🔆</div></div></div></a><a href="/2022-07-24-isucon12-qualified/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">ISUCON12予選突破した。 :old_noto_innocent: </h2><p class="jsx-6932c36d70dc94db">ISUCON12予選突破できた。そのまとめ。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/isucon/"><div class="jsx-a20cfd9621c39a29 chip">isucon</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/web/"><div class="jsx-a20cfd9621c39a29 chip">web</div></a></object><div class="jsx-a20cfd9621c39a29 icon">🎉</div></div></div></a><a href="/2022-07-13-notion-blog/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">Notionでもブログを書けるように</h2><p class="jsx-6932c36d70dc94db">Notionからnextjsでブログを生成する</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/notion/"><div class="jsx-a20cfd9621c39a29 chip">notion</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/nextjs/"><div class="jsx-a20cfd9621c39a29 chip">nextjs</div></a></object><div class="jsx-a20cfd9621c39a29 icon">📝</div></div></div></a><a href="/2021-10-29-next-js/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">メモ構築にnextjsを使う</h2><p class="jsx-6932c36d70dc94db">nextjsのSSGで静的ブログを書く。Markdownではなく、生のReactでブログを書きたい。</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/js/"><div class="jsx-a20cfd9621c39a29 chip">js</div></a></object><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/nextjs/"><div class="jsx-a20cfd9621c39a29 chip">nextjs</div></a></object><div class="jsx-a20cfd9621c39a29 icon">⭐</div></div></div></a><a href="/2021-05-27-more-ultimate-ticktacktoe/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">N次元マルバツゲーム Super Ultimate TickTackToe</h2><p class="jsx-6932c36d70dc94db">異常にネストした◯✕ゲーム</p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/game/"><div class="jsx-a20cfd9621c39a29 chip">game</div></a></object><div class="jsx-a20cfd9621c39a29 icon">⭐</div></div></div></a><a href="/2021-01-01-main-page/"><div class="jsx-6932c36d70dc94db card"><h2 class="jsx-6932c36d70dc94db">昔のブログとメインページ</h2><p class="jsx-6932c36d70dc94db"></p><div class="jsx-a20cfd9621c39a29 tags"><object class="jsx-a20cfd9621c39a29 chip-cont"><a class="jsx-a20cfd9621c39a29" href="/tags/dialy/"><div class="jsx-a20cfd9621c39a29 chip">dialy</div></a></object><div class="jsx-a20cfd9621c39a29 icon">📂</div></div></div></a></div></aside></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"id":"2023-05-26-poisson-collision","notion":[{"notionID":"24f2813d-f1e9-42e1-b17a-dd736d8466c9","id":"2023-09-20-git-rebase-keep-base","icon":"🔧","tags":["dev"],"title":"git rebase -iで分岐元を自動指定するには--keep-baseで良い","summary":"git rebase -i --keep-base mainをすると楽に歴史操作できる。","recordMap":null,"lastUpdated":"2023-09-20T12:35:00.000Z"},{"notionID":"6858b08e-715d-42a2-a59c-5efa486bee04","id":"2023-09-05-pga-3d","icon":"🧬","tags":["math"],"title":"投影幾何学的代数PGAによる3次元計算が楽で面白い","summary":"行列とかクォータニオンとか3次元平面とか全部一緒くたにあつかえるすごいヤツ","recordMap":null,"lastUpdated":"2023-09-07T04:21:00.000Z"},{"notionID":"89c14752-8289-4501-92db-370984ba07a1","id":"2023-07-02-yoneda-hom-functor","icon":"🔄","tags":["math","category"],"title":"ようやく理解した米田の補題とHom関手","summary":"圏論の基本と米田の補題がどう嬉しいのか。証明は書いてありません。","recordMap":null,"lastUpdated":"2023-07-03T14:23:00.000Z"},{"notionID":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","id":"2023-05-26-poisson-collision","icon":"🎯","tags":["dev","math"],"title":"[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","summary":"訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","recordMap":{"block":{"41b05590-7ee6-4ad2-8def-f14ffd551a4d":{"type":"reader","value":{"id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","content":["8c067bbd-7a0f-4503-a602-60bff995224d","1da3213b-2c6a-4744-a34b-b26c5d7d0e52","ce0c10cc-6059-4465-877a-8b1c552581ed","95bf1a27-ffe0-44e3-a04a-83a430e6cfaa","a185a331-aafa-4a73-bbbd-3dbe27f0dbfc","e449593b-dacb-4fff-a347-d408060a842d","42cf491e-8e78-4952-8413-aa208a7a79f4","5202dc6c-5504-497a-b037-a5288246f07f","692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","c8a389e3-902a-4fe6-8a3c-a0247b13016e","284208a7-6de6-49b7-bdd6-9595bcc6e8d2","9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","50f486d6-6851-46b9-8f4f-20575b29f502","f46107e1-50dc-457a-9d4d-4a110c57c40f","a30679dd-040b-4e60-b4e9-849be535b131","3039a6ae-e4f4-4f0b-8306-9203e5800d8f","2a742561-a3bd-4a36-8672-97124beb106e","6234e486-8a6e-4b16-8ac7-122996f14902","5e4622dd-57d6-4096-8c99-1fec82c1776c","c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","67bc0c33-ee60-499f-99b2-5d8d566571b3","5f60ce22-df14-4bfe-9b19-d112361de51e","fcd8131e-8814-453c-abf3-fd038166aa42","b19422c6-2660-42b1-b491-9e6dec45054a","39413f6a-eeea-4731-8879-0ccf03cc3444","5d17b19d-9a17-411c-a9c6-69996c61bca8","d71a44eb-98b7-4f9b-a813-693f8c2fa153","c66a69f6-f18c-4976-9eae-ec54fe93454b","eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582"],"properties":{"title":[["[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる"]]},"format":{"page_icon":"🎯"},"type":"page","created_time":1685074740000,"last_edited_time":1685413200000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d","parent_table":"table"}},"57afe6b6-f3fa-48bf-9a52-f29731547d0d":{"type":"reader","value":{"id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d","properties":{},"format":{},"type":"child_database","created_time":1656396780000,"last_edited_time":1695210360000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true}},"8c067bbd-7a0f-4503-a602-60bff995224d":{"type":"reader","value":{"id":"8c067bbd-7a0f-4503-a602-60bff995224d","properties":{"title":[["2023-05-29 訂正 どうやらルートぐらいしかよくならない"]]},"format":{"block_color":"default"},"type":"header","created_time":1685359560000,"last_edited_time":1685359560000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"1da3213b-2c6a-4744-a34b-b26c5d7d0e52":{"type":"reader","value":{"id":"1da3213b-2c6a-4744-a34b-b26c5d7d0e52","properties":{"source":[["https://twitter.com/wass80/status/1663144357732691968"]]},"type":"tweet","created_time":1685359560000,"last_edited_time":1685359560000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"ce0c10cc-6059-4465-877a-8b1c552581ed":{"type":"reader","value":{"id":"ce0c10cc-6059-4465-877a-8b1c552581ed","properties":{"title":[["「リスクが1/Nになったら、N倍流せるようになる」が間違いです。√N倍しか流せない、という誕生日の直感が正しいです。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685362560000,"last_edited_time":1685362680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"95bf1a27-ffe0-44e3-a04a-83a430e6cfaa":{"type":"reader","value":{"id":"95bf1a27-ffe0-44e3-a04a-83a430e6cfaa","properties":{"title":[["以下、誤りのある原文"]]},"format":{"block_color":"default"},"type":"header","created_time":1685359560000,"last_edited_time":1685362680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"a185a331-aafa-4a73-bbbd-3dbe27f0dbfc":{"type":"reader","value":{"id":"a185a331-aafa-4a73-bbbd-3dbe27f0dbfc","properties":{"link":[["https://topics.smt.docomo.ne.jp/article/itmedia_news/trend/itmedia_news-20230510_114?redirect=1"]],"description":[]},"format":{},"type":"bookmark","created_time":1685078640000,"last_edited_time":1685078640000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"e449593b-dacb-4fff-a347-d408060a842d":{"type":"reader","value":{"id":"e449593b-dacb-4fff-a347-d408060a842d","properties":{"title":[["コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074920000,"last_edited_time":1685077560000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"42cf491e-8e78-4952-8413-aa208a7a79f4":{"type":"reader","value":{"id":"42cf491e-8e78-4952-8413-aa208a7a79f4","properties":{"title":[["今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074980000,"last_edited_time":1685075640000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5202dc6c-5504-497a-b037-a5288246f07f":{"type":"reader","value":{"id":"5202dc6c-5504-497a-b037-a5288246f07f","properties":{"source":[["https://twitter.com/nonamea774/status/1658682102874001409"]]},"type":"tweet","created_time":1685074860000,"last_edited_time":1685074860000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab":{"type":"reader","value":{"id":"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","properties":{"title":[["秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074920000,"last_edited_time":1685077620000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c8a389e3-902a-4fe6-8a3c-a0247b13016e":{"type":"reader","value":{"id":"c8a389e3-902a-4fe6-8a3c-a0247b13016e","properties":{"title":[["誕生日のパラドックスとは"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685075160000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"284208a7-6de6-49b7-bdd6-9595bcc6e8d2":{"type":"reader","value":{"id":"284208a7-6de6-49b7-bdd6-9595bcc6e8d2","properties":{"title":[["「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075160000,"last_edited_time":1685077620000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9":{"type":"reader","value":{"id":"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","properties":{"title":[["p(x) = 1- \\prod_{k=1}^{x-1}\\frac{365-k}{365} "]]},"format":{},"type":"equation","created_time":1685075400000,"last_edited_time":1685075580000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8":{"type":"reader","value":{"id":"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","properties":{"title":[["「何回起こるか」に答えてくれるポアソン分布"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685077980000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"50f486d6-6851-46b9-8f4f-20575b29f502":{"type":"reader","value":{"id":"50f486d6-6851-46b9-8f4f-20575b29f502","properties":{"title":[["この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075580000,"last_edited_time":1685075700000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"f46107e1-50dc-457a-9d4d-4a110c57c40f":{"type":"reader","value":{"id":"f46107e1-50dc-457a-9d4d-4a110c57c40f","properties":{"title":[["この問題を考えるには「単位時間に平均"],["⁍",[["e","\\lambda"]]],["回起こる事象がこの単位時間に"],["⁍",[["e","k"]]],["回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075700000,"last_edited_time":1685076660000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"a30679dd-040b-4e60-b4e9-849be535b131":{"type":"reader","value":{"id":"a30679dd-040b-4e60-b4e9-849be535b131","properties":{"title":[["P(k) = \\frac{\\lambda^k}{k!}e^{-\\lambda}"]]},"format":{},"type":"equation","created_time":1685075880000,"last_edited_time":1685075940000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"3039a6ae-e4f4-4f0b-8306-9203e5800d8f":{"type":"reader","value":{"id":"3039a6ae-e4f4-4f0b-8306-9203e5800d8f","properties":{"title":[["1秒間に衝突する確率の計算"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685076600000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"2a742561-a3bd-4a36-8672-97124beb106e":{"type":"reader","value":{"id":"2a742561-a3bd-4a36-8672-97124beb106e","properties":{"title":[["1秒間に衝突する確率"],["⁍",[["e","p"]]],["は1秒間に事象が0回か1回起こる確率の余事象です。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075940000,"last_edited_time":1685076540000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"6234e486-8a6e-4b16-8ac7-122996f14902":{"type":"reader","value":{"id":"6234e486-8a6e-4b16-8ac7-122996f14902","properties":{"title":[["\\begin{align*}p\u0026=1-P(0)-P(1)\\\\\u0026=1-(1+\\lambda)e^{-\\lambda}\\\\\u0026\\simeq\\lambda^2  \\ \\ \\ [\\because e^{-\\lambda} \\simeq 1-\\lambda]\\end{align*}"]]},"format":{},"type":"equation","created_time":1685076060000,"last_edited_time":1685076360000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5e4622dd-57d6-4096-8c99-1fec82c1776c":{"type":"reader","value":{"id":"5e4622dd-57d6-4096-8c99-1fec82c1776c","properties":{"title":[["途中で"],["⁍",[["e","\\lambda^2 \\simeq 0"]]],["として"],["⁍",[["e","e^{-\\lambda}"]]],["をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076360000,"last_edited_time":1685077200000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47":{"type":"reader","value":{"id":"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","properties":{"title":[["衝突を1/x秒間に改善したときの衝突する確率の計算"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685076480000,"last_edited_time":1685077260000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"67bc0c33-ee60-499f-99b2-5d8d566571b3":{"type":"reader","value":{"id":"67bc0c33-ee60-499f-99b2-5d8d566571b3","properties":{"title":[["1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率"],["⁍",[["e","p'_0"]]],["を求めると、pのλがλ/xになるので次の式になります。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076540000,"last_edited_time":1685081520000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5f60ce22-df14-4bfe-9b19-d112361de51e":{"type":"reader","value":{"id":"5f60ce22-df14-4bfe-9b19-d112361de51e","properties":{"title":[["p'_0\\simeq\\frac{\\lambda^2}{x^2}=\\frac{p}{x^2}"]]},"format":{},"type":"equation","created_time":1685076780000,"last_edited_time":1685077080000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"fcd8131e-8814-453c-abf3-fd038166aa42":{"type":"reader","value":{"id":"fcd8131e-8814-453c-abf3-fd038166aa42","properties":{"title":[["1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076780000,"last_edited_time":1685077680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"b19422c6-2660-42b1-b491-9e6dec45054a":{"type":"reader","value":{"id":"b19422c6-2660-42b1-b491-9e6dec45054a","properties":{"title":[["\\begin{align*}p'\u0026=1-(1-p'_0)^x\\\\\u0026=1-\\left(1-\\frac{p}{x^2}\\right)^x\\\\\u0026\\simeq1-\\left(1-\\frac{p}{x}\\right)\\\\\u0026=\\frac{p}{x}\\end{align*}"]]},"format":{},"type":"equation","created_time":1685076840000,"last_edited_time":1685077680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"39413f6a-eeea-4731-8879-0ccf03cc3444":{"type":"reader","value":{"id":"39413f6a-eeea-4731-8879-0ccf03cc3444","properties":{"title":[["途中で"],["⁍",[["e","p^2\\simeq0"]]],["としてテイラー近似しています。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077080000,"last_edited_time":1685077200000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5d17b19d-9a17-411c-a9c6-69996c61bca8":{"type":"reader","value":{"id":"5d17b19d-9a17-411c-a9c6-69996c61bca8","properties":{"title":[["以上より、1秒間をx分割したときに衝突するリスクは"],["⁍",[["e","p/p'=x"]]],["と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077200000,"last_edited_time":1685077320000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"d71a44eb-98b7-4f9b-a813-693f8c2fa153":{"type":"reader","value":{"id":"d71a44eb-98b7-4f9b-a813-693f8c2fa153","properties":{"title":[["実際の排他制御の問題"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685077320000,"last_edited_time":1685077320000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c66a69f6-f18c-4976-9eae-ec54fe93454b":{"type":"reader","value":{"id":"c66a69f6-f18c-4976-9eae-ec54fe93454b","properties":{"title":[["分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077320000,"last_edited_time":1685077800000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582":{"type":"reader","value":{"id":"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582","format":{"block_color":"default"},"type":"text","created_time":1685077740000,"last_edited_time":1685077740000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}}},"collection":{},"collection_view":{},"collection_query":{},"signed_urls":{},"notion_user":{},"raw":{"page":{"object":"page","id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","created_time":"2023-05-26T04:19:00.000Z","last_edited_time":"2023-05-30T02:20:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"cover":null,"icon":{"type":"emoji","emoji":"🎯"},"parent":{"type":"database_id","database_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d"},"archived":false,"properties":{"URL":{"id":"QRDK","type":"formula","formula":{"type":"string","string":"2023-05-26-poisson-collision"}},"ID":{"id":"cRSs","type":"rich_text","rich_text":[{"type":"text","text":{"content":"poisson-collision","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"poisson-collision","href":null}]},"Summary":{"id":"e%3BSi","type":"rich_text","rich_text":[{"type":"text","text":{"content":"訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"訂正しました。誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","href":null}]},"Created":{"id":"nlFt","type":"created_time","created_time":"2023-05-26T04:19:00.000Z"},"Tags":{"id":"pJSo","type":"multi_select","multi_select":[{"id":"1d187712-fcb9-4f9b-af43-ceb6a9c545e7","name":"dev","color":"blue"},{"id":"3a54e6dd-2ebb-4176-9b30-a2a3d43afac8","name":"math","color":"pink"}]},"PublishedAt":{"id":"wN%3Dw","type":"date","date":{"start":"2023-05-26","end":null,"time_zone":null}},"Name":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","href":null}]}},"url":"https://www.notion.so/1000-41b055907ee64ad28deff14ffd551a4d","public_url":null},"block":{"object":"block","id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent":{"type":"database_id","database_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d"},"created_time":"2023-05-26T04:19:00.000Z","last_edited_time":"2023-05-30T02:20:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":true,"archived":false,"type":"child_page","child_page":{"title":"[訂正あり] 秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる"}},"children":[{"object":"block","id":"8c067bbd-7a0f-4503-a602-60bff995224d","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-29T11:26:00.000Z","last_edited_time":"2023-05-29T11:26:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_1","heading_1":{"rich_text":[{"type":"text","text":{"content":"2023-05-29 訂正 どうやらルートぐらいしかよくならない","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"2023-05-29 訂正 どうやらルートぐらいしかよくならない","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"1da3213b-2c6a-4744-a34b-b26c5d7d0e52","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-29T11:26:00.000Z","last_edited_time":"2023-05-29T11:26:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"embed","embed":{"caption":[],"url":"https://twitter.com/wass80/status/1663144357732691968"}},{"object":"block","id":"ce0c10cc-6059-4465-877a-8b1c552581ed","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-29T12:16:00.000Z","last_edited_time":"2023-05-29T12:18:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"「リスクが1/Nになったら、N倍流せるようになる」が間違いです。√N倍しか流せない、という誕生日の直感が正しいです。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"「リスクが1/Nになったら、N倍流せるようになる」が間違いです。√N倍しか流せない、という誕生日の直感が正しいです。","href":null}],"color":"default"}},{"object":"block","id":"95bf1a27-ffe0-44e3-a04a-83a430e6cfaa","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-29T11:26:00.000Z","last_edited_time":"2023-05-29T12:18:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_1","heading_1":{"rich_text":[{"type":"text","text":{"content":"以下、誤りのある原文","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"以下、誤りのある原文","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"a185a331-aafa-4a73-bbbd-3dbe27f0dbfc","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:24:00.000Z","last_edited_time":"2023-05-26T05:24:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://topics.smt.docomo.ne.jp/article/itmedia_news/trend/itmedia_news-20230510_114?redirect=1"}},{"object":"block","id":"e449593b-dacb-4fff-a347-d408060a842d","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:22:00.000Z","last_edited_time":"2023-05-26T05:06:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。","href":null}],"color":"default"}},{"object":"block","id":"42cf491e-8e78-4952-8413-aa208a7a79f4","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:23:00.000Z","last_edited_time":"2023-05-26T04:34:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）","href":null}],"color":"default"}},{"object":"block","id":"5202dc6c-5504-497a-b037-a5288246f07f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:21:00.000Z","last_edited_time":"2023-05-26T04:21:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"embed","embed":{"caption":[],"url":"https://twitter.com/nonamea774/status/1658682102874001409"}},{"object":"block","id":"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:22:00.000Z","last_edited_time":"2023-05-26T05:07:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。","href":null}],"color":"default"}},{"object":"block","id":"c8a389e3-902a-4fe6-8a3c-a0247b13016e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T04:26:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"誕生日のパラドックスとは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"誕生日のパラドックスとは","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"284208a7-6de6-49b7-bdd6-9595bcc6e8d2","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T05:07:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。","href":null}],"color":"default"}},{"object":"block","id":"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:30:00.000Z","last_edited_time":"2023-05-26T04:33:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"p(x) = 1- \\prod_{k=1}^{x-1}\\frac{365-k}{365} "}},{"object":"block","id":"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T05:13:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"「何回起こるか」に答えてくれるポアソン分布","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"「何回起こるか」に答えてくれるポアソン分布","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"50f486d6-6851-46b9-8f4f-20575b29f502","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:33:00.000Z","last_edited_time":"2023-05-26T04:35:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。","href":null}],"color":"default"}},{"object":"block","id":"f46107e1-50dc-457a-9d4d-4a110c57c40f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:35:00.000Z","last_edited_time":"2023-05-26T04:51:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この問題を考えるには「単位時間に平均","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この問題を考えるには「単位時間に平均","href":null},{"type":"equation","equation":{"expression":"\\lambda"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\\lambda","href":null},{"type":"text","text":{"content":"回起こる事象がこの単位時間に","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"回起こる事象がこの単位時間に","href":null},{"type":"equation","equation":{"expression":"k"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"k","href":null},{"type":"text","text":{"content":"回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。","href":null}],"color":"default"}},{"object":"block","id":"a30679dd-040b-4e60-b4e9-849be535b131","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:38:00.000Z","last_edited_time":"2023-05-26T04:39:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"P(k) = \\frac{\\lambda^k}{k!}e^{-\\lambda}"}},{"object":"block","id":"3039a6ae-e4f4-4f0b-8306-9203e5800d8f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T04:50:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"1秒間に衝突する確率の計算","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に衝突する確率の計算","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"2a742561-a3bd-4a36-8672-97124beb106e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:39:00.000Z","last_edited_time":"2023-05-26T04:49:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間に衝突する確率","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に衝突する確率","href":null},{"type":"equation","equation":{"expression":"p"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p","href":null},{"type":"text","text":{"content":"は1秒間に事象が0回か1回起こる確率の余事象です。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"は1秒間に事象が0回か1回起こる確率の余事象です。","href":null}],"color":"default"}},{"object":"block","id":"6234e486-8a6e-4b16-8ac7-122996f14902","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:41:00.000Z","last_edited_time":"2023-05-26T04:46:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"\\begin{align*}p\u0026=1-P(0)-P(1)\\\\\u0026=1-(1+\\lambda)e^{-\\lambda}\\\\\u0026\\simeq\\lambda^2  \\ \\ \\ [\\because e^{-\\lambda} \\simeq 1-\\lambda]\\end{align*}"}},{"object":"block","id":"5e4622dd-57d6-4096-8c99-1fec82c1776c","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:46:00.000Z","last_edited_time":"2023-05-26T05:00:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"途中で","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"途中で","href":null},{"type":"equation","equation":{"expression":"\\lambda^2 \\simeq 0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\\lambda^2 \\simeq 0","href":null},{"type":"text","text":{"content":"として","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"として","href":null},{"type":"equation","equation":{"expression":"e^{-\\lambda}"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"e^{-\\lambda}","href":null},{"type":"text","text":{"content":"をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。","href":null}],"color":"default"}},{"object":"block","id":"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:48:00.000Z","last_edited_time":"2023-05-26T05:01:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"衝突を1/x秒間に改善したときの衝突する確率の計算","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"衝突を1/x秒間に改善したときの衝突する確率の計算","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"67bc0c33-ee60-499f-99b2-5d8d566571b3","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:49:00.000Z","last_edited_time":"2023-05-26T06:12:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率","href":null},{"type":"equation","equation":{"expression":"p'_0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p'_0","href":null},{"type":"text","text":{"content":"を求めると、pのλがλ/xになるので次の式になります。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を求めると、pのλがλ/xになるので次の式になります。","href":null}],"color":"default"}},{"object":"block","id":"5f60ce22-df14-4bfe-9b19-d112361de51e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:53:00.000Z","last_edited_time":"2023-05-26T04:58:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"p'_0\\simeq\\frac{\\lambda^2}{x^2}=\\frac{p}{x^2}"}},{"object":"block","id":"fcd8131e-8814-453c-abf3-fd038166aa42","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:53:00.000Z","last_edited_time":"2023-05-26T05:08:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。","href":null}],"color":"default"}},{"object":"block","id":"b19422c6-2660-42b1-b491-9e6dec45054a","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:54:00.000Z","last_edited_time":"2023-05-26T05:08:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"\\begin{align*}p'\u0026=1-(1-p'_0)^x\\\\\u0026=1-\\left(1-\\frac{p}{x^2}\\right)^x\\\\\u0026\\simeq1-\\left(1-\\frac{p}{x}\\right)\\\\\u0026=\\frac{p}{x}\\end{align*}"}},{"object":"block","id":"39413f6a-eeea-4731-8879-0ccf03cc3444","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:58:00.000Z","last_edited_time":"2023-05-26T05:00:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"途中で","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"途中で","href":null},{"type":"equation","equation":{"expression":"p^2\\simeq0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p^2\\simeq0","href":null},{"type":"text","text":{"content":"としてテイラー近似しています。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"としてテイラー近似しています。","href":null}],"color":"default"}},{"object":"block","id":"5d17b19d-9a17-411c-a9c6-69996c61bca8","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:00:00.000Z","last_edited_time":"2023-05-26T05:02:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"以上より、1秒間をx分割したときに衝突するリスクは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"以上より、1秒間をx分割したときに衝突するリスクは","href":null},{"type":"equation","equation":{"expression":"p/p'=x"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p/p'=x","href":null},{"type":"text","text":{"content":"と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。","href":null}],"color":"default"}},{"object":"block","id":"d71a44eb-98b7-4f9b-a813-693f8c2fa153","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:02:00.000Z","last_edited_time":"2023-05-26T05:02:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"実際の排他制御の問題","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"実際の排他制御の問題","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c66a69f6-f18c-4976-9eae-ec54fe93454b","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:02:00.000Z","last_edited_time":"2023-05-26T05:10:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?","href":null}],"color":"default"}},{"object":"block","id":"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:09:00.000Z","last_edited_time":"2023-05-26T05:09:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}}]}},"lastUpdated":"2023-05-30T02:20:00.000Z"},{"notionID":"6d4a7c25-192f-4cc8-b642-fc10a18253ab","id":"2023-05-24-kariuchi-solver","icon":"🤞","tags":["dev","game"],"title":"奈良時代のボドゲ「かりうち」のソルバー","summary":"ショートカットが強すぎる気がしたので、モンテカルロ法のソルバーを書いた。","recordMap":null,"lastUpdated":"2023-05-24T04:10:00.000Z"},{"notionID":"c7838b51-d30e-48e7-9256-8a5e66d0ddf9","id":"2023-05-19-b-plus-tree-database","icon":"📃","tags":["dev","rust","web"],"title":"B+木を実装してデータベースとRustのRefCellに詳しくなる","summary":"Rustで簡単なデータベースを書く","recordMap":null,"lastUpdated":"2023-05-19T09:00:00.000Z"},{"notionID":"e7c37287-e4e5-49af-9965-5d924a782535","id":"2023-05-02-nearest-fraction-table","icon":"➗","tags":["math"],"title":"最も近い分数を探す表 ― 29%は「3人に1人」ではなく「7人に2人」 ","summary":"小数とそれに近い分数の表","recordMap":null,"lastUpdated":"2023-05-02T02:08:00.000Z"},{"notionID":"b0f0ca26-8c65-41d8-a26a-5094feb5290f","id":"2021-01-01-main-page","icon":"📂","tags":["dialy"],"title":"昔のブログとメインページ","summary":"","recordMap":null,"lastUpdated":"2023-01-11T12:37:00.000Z"},{"notionID":"d6b01565-6154-4d9e-adaf-4251d2686f5c","id":"2023-01-10-pencil-puzzle-sugar","icon":"🧩","tags":["puzzle","dev"],"title":"ペンシルパズルを自作して、唯一解判定ソルバーをSugar CSPソルバで作る","summary":"自作ペンパの作成補助ツールを書いた","recordMap":null,"lastUpdated":"2023-01-10T12:20:00.000Z"},{"notionID":"aaf030d8-d49a-459c-a27f-0b42f51a661e","id":"2022-12-08-zsh-ctrl-c-recover","icon":"🧬","tags":["dev"],"title":"zshでミスってCtrl-Cをして、空っぽになった入力を取り戻す","summary":"うっかりキャンセルしたコマンドを再入力できるようにzshを設定する。","recordMap":null,"lastUpdated":"2022-12-07T04:52:00.000Z"},{"notionID":"745b2eee-1012-4d85-a824-046b71d0645f","id":"2022-12-05-shortcut-of-word","icon":"🍰","tags":["dev"],"title":"ショートカットでコマンドを入力すると、どんな環境でもそこそこ便利になる","summary":"iterm2のショートカットで頻出単語を入力する","recordMap":null,"lastUpdated":"2022-12-05T16:13:00.000Z"},{"notionID":"082b239b-a9f1-4602-9a4e-f7dcc5c44983","id":"2022-10-29-repair-ih","icon":"🔧","tags":["dialy"],"title":"壊れた卓上IHを自分で修理する","summary":"IHのスイッチが壊れたので、自分ではんだ付けして直す。","recordMap":null,"lastUpdated":"2022-10-28T12:29:00.000Z"},{"notionID":"fce999af-1379-4dc9-b44f-b2c172f1198d","id":"2022-10-28-the-fools-question","icon":"❓","tags":["dialy"],"title":"教養動画における本当に何もわかってない道化の存在について","summary":"何もわかっていな人が与える安心感と質問することについて。","recordMap":null,"lastUpdated":"2022-11-02T12:37:00.000Z"},{"notionID":"9a0af657-87b2-44c6-9b01-8d1e6260fd5e","id":"2022-10-28-virtual-dom","icon":"🌌","tags":["js"],"title":"仮想DOMの差分更新を簡単に実装する","summary":"仮想DOMの簡単な実装を行いました。差分をみて必要なDOMの更新だけ取り出します。","recordMap":null,"lastUpdated":"2022-10-28T21:59:00.000Z"},{"notionID":"5d9d1a5b-f3ba-4562-a71d-126d16803f1c","id":"2022-10-28-vue-computed","icon":"💚","tags":["vue","js"],"title":"Vueっぽいものを実装してComputedの仕組みを探る","summary":"VueのComputedのやや魔法っぽい、依存関係の自動導出についての仕組みを、簡単な実装で解説しました。","recordMap":null,"lastUpdated":"2022-11-03T13:10:00.000Z"},{"notionID":"5b75289d-a98f-4a25-a02b-4290f87cc16b","id":"2022-10-05-tictactoe-random","icon":"⭕","tags":["game"],"title":"三目並べをランダムに指したときの先手の勝利確率は?","summary":"まったくもってランダムに三目並べを行うときに先手はどれくらい有利か","recordMap":null,"lastUpdated":"2022-11-24T10:42:00.000Z"},{"notionID":"b34f2185-860f-46e4-adae-b6a824a7c06b","id":"2022-08-07-ray-tracing-in-one-weekend","icon":"🔆","tags":["rust"],"title":"『Ray Tracing in One Weekend』をやった","summary":"レイトレーシングを実装する","recordMap":null,"lastUpdated":"2022-08-09T11:35:00.000Z"},{"notionID":"9137f946-c9f2-495a-9465-e22c317717bf","id":"2022-08-09-infinite-turtle-brainfuck","icon":"🧠","tags":["game"],"title":"コンベアで計算する『Infinite Turtles』でBrainfuckインタプリタを実装した","summary":"ベルトコンベアでbrainfuckを計算する様子","recordMap":null,"lastUpdated":"2022-10-28T12:28:00.000Z"},{"notionID":"7b60f0a0-848e-40d5-be90-9f28d934fbb2","id":"2022-10-25-rust-c-compiler","icon":"🦀","tags":["rust","compiler"],"title":"Rustで「低レイヤを知りたい人のためのCコンパイラ作成入門」を少しやる","summary":"コンパイラ作りを思い出す","recordMap":null,"lastUpdated":"2022-10-25T09:06:00.000Z"},{"notionID":"02f7fec3-88ee-4275-bb46-057a81153eba","id":"2022-07-24-isucon12-qualified","icon":"🎉","tags":["isucon","web"],"title":"ISUCON12予選突破した。 :old_noto_innocent: ","summary":"ISUCON12予選突破できた。そのまとめ。","recordMap":null,"lastUpdated":"2022-07-28T02:00:00.000Z"},{"notionID":"8837459a-5a44-48f1-ba64-3764c7cd659b","id":"2022-08-08-inifinite-turtles","icon":"🐢","tags":["game"],"title":"自動化コンベアでチューリング完全を目指す『Infinite Turtles』の紹介","summary":"steamのゲームの紹介。ベルトコンベアでいろんな問題を解く。","recordMap":null,"lastUpdated":"2022-10-28T12:29:00.000Z"},{"notionID":"31901beb-64fe-4576-8211-e14654a1c0c7","id":"2022-07-13-notion-blog","icon":"📝","tags":["notion","nextjs"],"title":"Notionでもブログを書けるように","summary":"Notionからnextjsでブログを生成する","recordMap":null,"lastUpdated":"2023-05-26T05:38:00.000Z"}]},"__N_SSG":true},"page":"/[id]","query":{"id":"2023-05-26-poisson-collision"},"buildId":"Zd2yrcSyvQ06Q0UleL3dV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>