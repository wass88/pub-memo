{"pageProps":{"id":"2023-05-26-poisson-collision","notion":[{"notionID":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","id":"2023-05-26-poisson-collision","icon":null,"tags":["dev","math"],"title":"秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","summary":"誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","recordMap":{"block":{"41b05590-7ee6-4ad2-8def-f14ffd551a4d":{"type":"reader","value":{"id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","content":["07bfe501-819e-4d58-adc7-ceebb47aa50c","e449593b-dacb-4fff-a347-d408060a842d","42cf491e-8e78-4952-8413-aa208a7a79f4","5202dc6c-5504-497a-b037-a5288246f07f","692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","c8a389e3-902a-4fe6-8a3c-a0247b13016e","284208a7-6de6-49b7-bdd6-9595bcc6e8d2","9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","50f486d6-6851-46b9-8f4f-20575b29f502","f46107e1-50dc-457a-9d4d-4a110c57c40f","a30679dd-040b-4e60-b4e9-849be535b131","3039a6ae-e4f4-4f0b-8306-9203e5800d8f","2a742561-a3bd-4a36-8672-97124beb106e","6234e486-8a6e-4b16-8ac7-122996f14902","5e4622dd-57d6-4096-8c99-1fec82c1776c","c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","67bc0c33-ee60-499f-99b2-5d8d566571b3","5f60ce22-df14-4bfe-9b19-d112361de51e","fcd8131e-8814-453c-abf3-fd038166aa42","b19422c6-2660-42b1-b491-9e6dec45054a","39413f6a-eeea-4731-8879-0ccf03cc3444","5d17b19d-9a17-411c-a9c6-69996c61bca8","d71a44eb-98b7-4f9b-a813-693f8c2fa153","c66a69f6-f18c-4976-9eae-ec54fe93454b","eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582"],"properties":{"title":[["秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる"]]},"format":{},"type":"page","created_time":1685074740000,"last_edited_time":1685078220000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d","parent_table":"table"}},"57afe6b6-f3fa-48bf-9a52-f29731547d0d":{"type":"reader","value":{"id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d","properties":{},"format":{},"type":"child_database","created_time":1656396780000,"last_edited_time":1685074740000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true}},"07bfe501-819e-4d58-adc7-ceebb47aa50c":{"type":"reader","value":{"id":"07bfe501-819e-4d58-adc7-ceebb47aa50c","properties":{"link":[["https://www.itmedia.co.jp/news/articles/2305/10/news114.html"]],"description":[["���s�̃R���r�j�̏ؖ�����t�T�[�r�X�ŁA���l�̌ːГ��{�����s���ꂽ���B�u2�J���̃R���r�j�ŁA2�l�̏Z���������Ɍ�t�\\�������ۂɁA�㑱�̏�������s���鏈�����㏑�����Ă��܂��v�o�O�������B"]],"title":[["���s�̃R���r�j�ő��l�̌ːГ��{�딭�s�@�u2�l�����ɔ��s�\\������Ə㏑���v�o�O�������@�x�m��"]]},"format":{"bookmark_cover":"https://image.itmedia.co.jp/news/articles/2305/10/cover_news114.jpg"},"type":"bookmark","created_time":1685074920000,"last_edited_time":1685074920000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"e449593b-dacb-4fff-a347-d408060a842d":{"type":"reader","value":{"id":"e449593b-dacb-4fff-a347-d408060a842d","properties":{"title":[["コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074920000,"last_edited_time":1685077560000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"42cf491e-8e78-4952-8413-aa208a7a79f4":{"type":"reader","value":{"id":"42cf491e-8e78-4952-8413-aa208a7a79f4","properties":{"title":[["今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074980000,"last_edited_time":1685075640000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5202dc6c-5504-497a-b037-a5288246f07f":{"type":"reader","value":{"id":"5202dc6c-5504-497a-b037-a5288246f07f","properties":{"source":[["https://twitter.com/nonamea774/status/1658682102874001409"]]},"type":"tweet","created_time":1685074860000,"last_edited_time":1685074860000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab":{"type":"reader","value":{"id":"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","properties":{"title":[["秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685074920000,"last_edited_time":1685077620000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c8a389e3-902a-4fe6-8a3c-a0247b13016e":{"type":"reader","value":{"id":"c8a389e3-902a-4fe6-8a3c-a0247b13016e","properties":{"title":[["誕生日のパラドックスとは"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685075160000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"284208a7-6de6-49b7-bdd6-9595bcc6e8d2":{"type":"reader","value":{"id":"284208a7-6de6-49b7-bdd6-9595bcc6e8d2","properties":{"title":[["「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075160000,"last_edited_time":1685077620000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9":{"type":"reader","value":{"id":"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","properties":{"title":[["p(x) = 1- \\prod_{k=1}^{x-1}\\frac{365-k}{365} "]]},"format":{},"type":"equation","created_time":1685075400000,"last_edited_time":1685075580000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8":{"type":"reader","value":{"id":"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","properties":{"title":[["「何回起こるか」に答えてくれるポアソン分布"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685077980000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"50f486d6-6851-46b9-8f4f-20575b29f502":{"type":"reader","value":{"id":"50f486d6-6851-46b9-8f4f-20575b29f502","properties":{"title":[["この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075580000,"last_edited_time":1685075700000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"f46107e1-50dc-457a-9d4d-4a110c57c40f":{"type":"reader","value":{"id":"f46107e1-50dc-457a-9d4d-4a110c57c40f","properties":{"title":[["この問題を考えるには「単位時間に平均"],["⁍",[["e","\\lambda"]]],["回起こる事象がこの単位時間に"],["⁍",[["e","k"]]],["回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075700000,"last_edited_time":1685076660000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"a30679dd-040b-4e60-b4e9-849be535b131":{"type":"reader","value":{"id":"a30679dd-040b-4e60-b4e9-849be535b131","properties":{"title":[["P(k) = \\frac{\\lambda^k}{k!}e^{-\\lambda}"]]},"format":{},"type":"equation","created_time":1685075880000,"last_edited_time":1685075940000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"3039a6ae-e4f4-4f0b-8306-9203e5800d8f":{"type":"reader","value":{"id":"3039a6ae-e4f4-4f0b-8306-9203e5800d8f","properties":{"title":[["1秒間に衝突する確率の計算"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685075160000,"last_edited_time":1685076600000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"2a742561-a3bd-4a36-8672-97124beb106e":{"type":"reader","value":{"id":"2a742561-a3bd-4a36-8672-97124beb106e","properties":{"title":[["1秒間に衝突する確率"],["⁍",[["e","p"]]],["は1秒間に事象が0回か1回起こる確率の余事象です。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685075940000,"last_edited_time":1685076540000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"6234e486-8a6e-4b16-8ac7-122996f14902":{"type":"reader","value":{"id":"6234e486-8a6e-4b16-8ac7-122996f14902","properties":{"title":[["\\begin{align*}p&=1-P(0)-P(1)\\\\&=1-(1+\\lambda)e^{-\\lambda}\\\\&\\simeq\\lambda^2  \\ \\ \\ [\\because e^{-\\lambda} \\simeq 1-\\lambda]\\end{align*}"]]},"format":{},"type":"equation","created_time":1685076060000,"last_edited_time":1685076360000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5e4622dd-57d6-4096-8c99-1fec82c1776c":{"type":"reader","value":{"id":"5e4622dd-57d6-4096-8c99-1fec82c1776c","properties":{"title":[["途中で"],["⁍",[["e","\\lambda^2 \\simeq 0"]]],["として"],["⁍",[["e","e^{-\\lambda}"]]],["をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076360000,"last_edited_time":1685077200000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47":{"type":"reader","value":{"id":"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","properties":{"title":[["衝突を1/x秒間に改善したときの衝突する確率の計算"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685076480000,"last_edited_time":1685077260000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"67bc0c33-ee60-499f-99b2-5d8d566571b3":{"type":"reader","value":{"id":"67bc0c33-ee60-499f-99b2-5d8d566571b3","properties":{"title":[["1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率"],["⁍",[["e","p'_0"]]],["を求めると、pのλがλ/xになったの次の式になります。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076540000,"last_edited_time":1685078220000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5f60ce22-df14-4bfe-9b19-d112361de51e":{"type":"reader","value":{"id":"5f60ce22-df14-4bfe-9b19-d112361de51e","properties":{"title":[["p'_0\\simeq\\frac{\\lambda^2}{x^2}=\\frac{p}{x^2}"]]},"format":{},"type":"equation","created_time":1685076780000,"last_edited_time":1685077080000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"fcd8131e-8814-453c-abf3-fd038166aa42":{"type":"reader","value":{"id":"fcd8131e-8814-453c-abf3-fd038166aa42","properties":{"title":[["1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685076780000,"last_edited_time":1685077680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"b19422c6-2660-42b1-b491-9e6dec45054a":{"type":"reader","value":{"id":"b19422c6-2660-42b1-b491-9e6dec45054a","properties":{"title":[["\\begin{align*}p'&=1-(1-p'_0)^x\\\\&=1-\\left(1-\\frac{p}{x^2}\\right)^x\\\\&\\simeq1-\\left(1-\\frac{p}{x}\\right)\\\\&=\\frac{p}{x}\\end{align*}"]]},"format":{},"type":"equation","created_time":1685076840000,"last_edited_time":1685077680000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"39413f6a-eeea-4731-8879-0ccf03cc3444":{"type":"reader","value":{"id":"39413f6a-eeea-4731-8879-0ccf03cc3444","properties":{"title":[["途中で"],["⁍",[["e","p^2\\simeq0"]]],["としてテイラー近似しています。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077080000,"last_edited_time":1685077200000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"5d17b19d-9a17-411c-a9c6-69996c61bca8":{"type":"reader","value":{"id":"5d17b19d-9a17-411c-a9c6-69996c61bca8","properties":{"title":[["以上より、1秒間をx分割したときに衝突するリスクは"],["⁍",[["e","p/p'=x"]]],["と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077200000,"last_edited_time":1685077320000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"d71a44eb-98b7-4f9b-a813-693f8c2fa153":{"type":"reader","value":{"id":"d71a44eb-98b7-4f9b-a813-693f8c2fa153","properties":{"title":[["実際の排他制御の問題"]]},"format":{"block_color":"default"},"type":"sub_header","created_time":1685077320000,"last_edited_time":1685077320000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"c66a69f6-f18c-4976-9eae-ec54fe93454b":{"type":"reader","value":{"id":"c66a69f6-f18c-4976-9eae-ec54fe93454b","properties":{"title":[["分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?"]]},"format":{"block_color":"default"},"type":"text","created_time":1685077320000,"last_edited_time":1685077800000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}},"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582":{"type":"reader","value":{"id":"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582","format":{"block_color":"default"},"type":"text","created_time":1685077740000,"last_edited_time":1685077740000,"created_by_table":"notion_user","created_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","last_edited_by_table":"user","last_edited_by_id":"7efc331f-9b9e-449d-862e-b0eebef23f04","alive":true,"parent_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent_table":"block"}}},"collection":{},"collection_view":{},"collection_query":{},"signed_urls":{},"notion_user":{},"raw":{"page":{"object":"page","id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","created_time":"2023-05-26T04:19:00.000Z","last_edited_time":"2023-05-26T05:17:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"cover":null,"icon":null,"parent":{"type":"database_id","database_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d"},"archived":false,"properties":{"ID":{"id":"cRSs","type":"rich_text","rich_text":[{"type":"text","text":{"content":"poisson-collision","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"poisson-collision","href":null}]},"Summary":{"id":"e%3BSi","type":"rich_text","rich_text":[{"type":"text","text":{"content":"誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"誕生日のパラドックスを考えると1000倍の安全性は手に入らない気がするが…？","href":null}]},"Created":{"id":"nlFt","type":"created_time","created_time":"2023-05-26T04:19:00.000Z"},"Tags":{"id":"pJSo","type":"multi_select","multi_select":[{"id":"1d187712-fcb9-4f9b-af43-ceb6a9c545e7","name":"dev","color":"blue"},{"id":"3a54e6dd-2ebb-4176-9b30-a2a3d43afac8","name":"math","color":"pink"}]},"PublishedAt":{"id":"wN%3Dw","type":"date","date":{"start":"2023-05-26","end":null,"time_zone":null}},"Name":{"id":"title","type":"title","title":[{"type":"text","text":{"content":"秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる","href":null}]}},"url":"https://www.notion.so/1000-41b055907ee64ad28deff14ffd551a4d"},"block":{"object":"block","id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d","parent":{"type":"database_id","database_id":"57afe6b6-f3fa-48bf-9a52-f29731547d0d"},"created_time":"2023-05-26T04:19:00.000Z","last_edited_time":"2023-05-26T05:17:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":true,"archived":false,"type":"child_page","child_page":{"title":"秒単位で衝突するファイル名をミリ秒単位に改善すると、1000倍安全になる"}},"children":[{"object":"block","id":"07bfe501-819e-4d58-adc7-ceebb47aa50c","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:22:00.000Z","last_edited_time":"2023-05-26T04:22:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"bookmark","bookmark":{"caption":[],"url":"https://www.itmedia.co.jp/news/articles/2305/10/news114.html"}},{"object":"block","id":"e449593b-dacb-4fff-a347-d408060a842d","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:22:00.000Z","last_edited_time":"2023-05-26T05:06:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"コンビニのプリントサービスのバグが有名になりました。秒単位で同時刻にサービスを2名以上に提供すると、秒で名付けられたファイル名の衝突が起こり、正しく処理がなされないというバグです。","href":null}],"color":"default"}},{"object":"block","id":"42cf491e-8e78-4952-8413-aa208a7a79f4","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:23:00.000Z","last_edited_time":"2023-05-26T04:34:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"今回はこの実装の是非ではなく、次の素朴な疑問に答えたいと思います。（私の先輩のツイートです）","href":null}],"color":"default"}},{"object":"block","id":"5202dc6c-5504-497a-b037-a5288246f07f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:21:00.000Z","last_edited_time":"2023-05-26T04:21:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"embed","embed":{"caption":[],"url":"https://twitter.com/nonamea774/status/1658682102874001409"}},{"object":"block","id":"692a3998-4e2b-474e-a1e6-eb6cfc72a6ab","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:22:00.000Z","last_edited_time":"2023-05-26T05:07:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"秒単位のファイル名だから衝突しやすいのであって、ミリ秒単位なら多少マシなのではというアイデアについてです。衝突しにくくなることは事実でしょう。しかし、誕生日のパラドックスを知っていると32倍ぐらいの改善にしかならなそうな気もします。実際に計算してみましょう。","href":null}],"color":"default"}},{"object":"block","id":"c8a389e3-902a-4fe6-8a3c-a0247b13016e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T04:26:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"誕生日のパラドックスとは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"誕生日のパラドックスとは","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"284208a7-6de6-49b7-bdd6-9595bcc6e8d2","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T05:07:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"「30人のクラスに同じ誕生日の2人がいる確率は？」が誕生日のパラドックスと言われる問題です。誕生日は365通りあるので、30人だと10%ぐらいかなという気がします。ところが、実際に計算すると約71%です。1人ずつ増えやしたときに、自分と同じ誕生日の人は365分の1ずつしか増えないのですが、誰かと誰かが同じ誕生日であるペアは急激に存在しやすくなります。","href":null}],"color":"default"}},{"object":"block","id":"9fea8aa6-25e9-4f4a-bfa2-0eb1d15ba7e9","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:30:00.000Z","last_edited_time":"2023-05-26T04:33:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"p(x) = 1- \\prod_{k=1}^{x-1}\\frac{365-k}{365} "}},{"object":"block","id":"7c2f0943-65f3-4db4-8b82-ca591ff2a7c8","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T05:13:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"「何回起こるか」に答えてくれるポアソン分布","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"「何回起こるか」に答えてくれるポアソン分布","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"50f486d6-6851-46b9-8f4f-20575b29f502","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:33:00.000Z","last_edited_time":"2023-05-26T04:35:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この誕生日の直感を今回の衝突のケースに適用できるのでしょうか。実は単純には適用できません。「N人のクラスに同じ秒の人が2人いる確率は？」のN人の部分がよくわかりません。","href":null}],"color":"default"}},{"object":"block","id":"f46107e1-50dc-457a-9d4d-4a110c57c40f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:35:00.000Z","last_edited_time":"2023-05-26T04:51:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"この問題を考えるには「単位時間に平均","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"この問題を考えるには「単位時間に平均","href":null},{"type":"equation","equation":{"expression":"\\lambda"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\\lambda","href":null},{"type":"text","text":{"content":"回起こる事象がこの単位時間に","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"回起こる事象がこの単位時間に","href":null},{"type":"equation","equation":{"expression":"k"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"k","href":null},{"type":"text","text":{"content":"回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"回起こる確率は？」というポワソン分布が役に立ちます。ポワソン分布は次の式で与えられます。","href":null}],"color":"default"}},{"object":"block","id":"a30679dd-040b-4e60-b4e9-849be535b131","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:38:00.000Z","last_edited_time":"2023-05-26T04:39:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"P(k) = \\frac{\\lambda^k}{k!}e^{-\\lambda}"}},{"object":"block","id":"3039a6ae-e4f4-4f0b-8306-9203e5800d8f","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:26:00.000Z","last_edited_time":"2023-05-26T04:50:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"1秒間に衝突する確率の計算","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に衝突する確率の計算","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"2a742561-a3bd-4a36-8672-97124beb106e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:39:00.000Z","last_edited_time":"2023-05-26T04:49:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間に衝突する確率","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に衝突する確率","href":null},{"type":"equation","equation":{"expression":"p"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p","href":null},{"type":"text","text":{"content":"は1秒間に事象が0回か1回起こる確率の余事象です。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"は1秒間に事象が0回か1回起こる確率の余事象です。","href":null}],"color":"default"}},{"object":"block","id":"6234e486-8a6e-4b16-8ac7-122996f14902","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:41:00.000Z","last_edited_time":"2023-05-26T04:46:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"\\begin{align*}p&=1-P(0)-P(1)\\\\&=1-(1+\\lambda)e^{-\\lambda}\\\\&\\simeq\\lambda^2  \\ \\ \\ [\\because e^{-\\lambda} \\simeq 1-\\lambda]\\end{align*}"}},{"object":"block","id":"5e4622dd-57d6-4096-8c99-1fec82c1776c","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:46:00.000Z","last_edited_time":"2023-05-26T05:00:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"途中で","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"途中で","href":null},{"type":"equation","equation":{"expression":"\\lambda^2 \\simeq 0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"\\lambda^2 \\simeq 0","href":null},{"type":"text","text":{"content":"として","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"として","href":null},{"type":"equation","equation":{"expression":"e^{-\\lambda}"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"e^{-\\lambda}","href":null},{"type":"text","text":{"content":"をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"をテイラー近似しています。1秒に3回以上事象が起こる確率を無視したとしても同じ式が得られます。","href":null}],"color":"default"}},{"object":"block","id":"c2bbee80-5cc5-42dc-9d72-2ac5930d7d47","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:48:00.000Z","last_edited_time":"2023-05-26T05:01:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"衝突を1/x秒間に改善したときの衝突する確率の計算","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"衝突を1/x秒間に改善したときの衝突する確率の計算","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"67bc0c33-ee60-499f-99b2-5d8d566571b3","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:49:00.000Z","last_edited_time":"2023-05-26T05:17:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間に1回までセーフが、1/x秒間に1回までセーフに改善したとします。単位時間が狭まったので、1/x秒間には平均λ/x回の事象が起こると考えます。1/x秒間に衝突する確率","href":null},{"type":"equation","equation":{"expression":"p'_0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p'_0","href":null},{"type":"text","text":{"content":"を求めると、pのλがλ/xになったの次の式になります。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"を求めると、pのλがλ/xになったの次の式になります。","href":null}],"color":"default"}},{"object":"block","id":"5f60ce22-df14-4bfe-9b19-d112361de51e","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:53:00.000Z","last_edited_time":"2023-05-26T04:58:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"p'_0\\simeq\\frac{\\lambda^2}{x^2}=\\frac{p}{x^2}"}},{"object":"block","id":"fcd8131e-8814-453c-abf3-fd038166aa42","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:53:00.000Z","last_edited_time":"2023-05-26T05:08:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"1秒間には1/x秒間の衝突可能性がx回あるので、1秒間に衝突する可能性は次式です。","href":null}],"color":"default"}},{"object":"block","id":"b19422c6-2660-42b1-b491-9e6dec45054a","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:54:00.000Z","last_edited_time":"2023-05-26T05:08:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"equation","equation":{"expression":"\\begin{align*}p'&=1-(1-p'_0)^x\\\\&=1-\\left(1-\\frac{p}{x^2}\\right)^x\\\\&\\simeq1-\\left(1-\\frac{p}{x}\\right)\\\\&=\\frac{p}{x}\\end{align*}"}},{"object":"block","id":"39413f6a-eeea-4731-8879-0ccf03cc3444","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T04:58:00.000Z","last_edited_time":"2023-05-26T05:00:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"途中で","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"途中で","href":null},{"type":"equation","equation":{"expression":"p^2\\simeq0"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p^2\\simeq0","href":null},{"type":"text","text":{"content":"としてテイラー近似しています。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"としてテイラー近似しています。","href":null}],"color":"default"}},{"object":"block","id":"5d17b19d-9a17-411c-a9c6-69996c61bca8","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:00:00.000Z","last_edited_time":"2023-05-26T05:02:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"以上より、1秒間をx分割したときに衝突するリスクは","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"以上より、1秒間をx分割したときに衝突するリスクは","href":null},{"type":"equation","equation":{"expression":"p/p'=x"},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"p/p'=x","href":null},{"type":"text","text":{"content":"と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"と、x倍改善されることがわかりました。実は誕生日のパラドックスは関係なく、素直に改善を受け入れることができてよかったです。","href":null}],"color":"default"}},{"object":"block","id":"d71a44eb-98b7-4f9b-a813-693f8c2fa153","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:02:00.000Z","last_edited_time":"2023-05-26T05:02:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"heading_2","heading_2":{"rich_text":[{"type":"text","text":{"content":"実際の排他制御の問題","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"実際の排他制御の問題","href":null}],"is_toggleable":false,"color":"default"}},{"object":"block","id":"c66a69f6-f18c-4976-9eae-ec54fe93454b","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:02:00.000Z","last_edited_time":"2023-05-26T05:10:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[{"type":"text","text":{"content":"分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?","link":null},"annotations":{"bold":false,"italic":false,"strikethrough":false,"underline":false,"code":false,"color":"default"},"plain_text":"分散処理における排他制御は厄介です。想像もつかない様々な事故が起こります。不自由な環境での苦肉の策の可能性もあります。衝突を検出できてリトライする仕様ならば問題なかったかもしれないと思います。ダーティーな解決策の上では、秒ではなくミリ秒にすれば誕生日の心配なく1000倍安全だよということを知っておきましょう。ミリ秒の精度ぐらいは流石に出る、出るよね…?","href":null}],"color":"default"}},{"object":"block","id":"eb6e9ee0-ca75-4f8b-a6c2-3cde5f057582","parent":{"type":"page_id","page_id":"41b05590-7ee6-4ad2-8def-f14ffd551a4d"},"created_time":"2023-05-26T05:09:00.000Z","last_edited_time":"2023-05-26T05:09:00.000Z","created_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"last_edited_by":{"object":"user","id":"7efc331f-9b9e-449d-862e-b0eebef23f04"},"has_children":false,"archived":false,"type":"paragraph","paragraph":{"rich_text":[],"color":"default"}}]}},"lastUpdated":"2023-05-26T05:17:00.000Z"},{"notionID":"6d4a7c25-192f-4cc8-b642-fc10a18253ab","id":"2023-05-24-kariuchi-solver","icon":"🤞","tags":["dev","game"],"title":"奈良時代のボドゲ「かりうち」のソルバー","summary":"ショートカットが強すぎる気がしたので、モンテカルロ法のソルバーを書いた。","recordMap":null,"lastUpdated":"2023-05-24T04:10:00.000Z"},{"notionID":"c7838b51-d30e-48e7-9256-8a5e66d0ddf9","id":"2023-05-19-b-plus-tree-database","icon":"📃","tags":["dev","rust","web"],"title":"B+木を実装してデータベースとRustのRefCellに詳しくなる","summary":"Rustで簡単なデータベースを書く","recordMap":null,"lastUpdated":"2023-05-19T09:00:00.000Z"},{"notionID":"e7c37287-e4e5-49af-9965-5d924a782535","id":"2023-05-02-nearest-fraction-table","icon":"➗","tags":["math"],"title":"最も近い分数を探す表 ― 29%は「3人に1人」ではなく「7人に2人」 ","summary":"小数とそれに近い分数の表","recordMap":null,"lastUpdated":"2023-05-02T02:08:00.000Z"},{"notionID":"b0f0ca26-8c65-41d8-a26a-5094feb5290f","id":"2021-01-01-main-page","icon":"📂","tags":["dialy"],"title":"昔のブログとメインページ","summary":"","recordMap":null,"lastUpdated":"2023-01-11T12:37:00.000Z"},{"notionID":"d6b01565-6154-4d9e-adaf-4251d2686f5c","id":"2023-01-10-pencil-puzzle-sugar","icon":"🧩","tags":["puzzle","dev"],"title":"ペンシルパズルを自作して、唯一解判定ソルバーをSugar CSPソルバで作る","summary":"自作ペンパの作成補助ツールを書いた","recordMap":null,"lastUpdated":"2023-01-10T12:20:00.000Z"},{"notionID":"aaf030d8-d49a-459c-a27f-0b42f51a661e","id":"2022-12-08-zsh-ctrl-c-recover","icon":"🧬","tags":["dev"],"title":"zshでミスってCtrl-Cをして、空っぽになった入力を取り戻す","summary":"うっかりキャンセルしたコマンドを再入力できるようにzshを設定する。","recordMap":null,"lastUpdated":"2022-12-07T04:52:00.000Z"},{"notionID":"745b2eee-1012-4d85-a824-046b71d0645f","id":"2022-12-05-shortcut-of-word","icon":"🍰","tags":["dev"],"title":"ショートカットでコマンドを入力すると、どんな環境でもそこそこ便利になる","summary":"iterm2のショートカットで頻出単語を入力する","recordMap":null,"lastUpdated":"2022-12-05T16:13:00.000Z"},{"notionID":"082b239b-a9f1-4602-9a4e-f7dcc5c44983","id":"2022-10-29-repair-ih","icon":"🔧","tags":["dialy"],"title":"壊れた卓上IHを自分で修理する","summary":"IHのスイッチが壊れたので、自分ではんだ付けして直す。","recordMap":null,"lastUpdated":"2022-10-28T12:29:00.000Z"},{"notionID":"fce999af-1379-4dc9-b44f-b2c172f1198d","id":"2022-10-28-the-fools-question","icon":"❓","tags":["dialy"],"title":"教養動画における本当に何もわかってない道化の存在について","summary":"何もわかっていな人が与える安心感と質問することについて。","recordMap":null,"lastUpdated":"2022-11-02T12:37:00.000Z"},{"notionID":"9a0af657-87b2-44c6-9b01-8d1e6260fd5e","id":"2022-10-28-virtual-dom","icon":"🌌","tags":["js"],"title":"仮想DOMの差分更新を簡単に実装する","summary":"仮想DOMの簡単な実装を行いました。差分をみて必要なDOMの更新だけ取り出します。","recordMap":null,"lastUpdated":"2022-10-28T21:59:00.000Z"},{"notionID":"5d9d1a5b-f3ba-4562-a71d-126d16803f1c","id":"2022-10-28-vue-computed","icon":"💚","tags":["vue","js"],"title":"Vueっぽいものを実装してComputedの仕組みを探る","summary":"VueのComputedのやや魔法っぽい、依存関係の自動導出についての仕組みを、簡単な実装で解説しました。","recordMap":null,"lastUpdated":"2022-11-03T13:10:00.000Z"},{"notionID":"5b75289d-a98f-4a25-a02b-4290f87cc16b","id":"2022-10-05-tictactoe-random","icon":"⭕","tags":["game"],"title":"三目並べをランダムに指したときの先手の勝利確率は?","summary":"まったくもってランダムに三目並べを行うときに先手はどれくらい有利か","recordMap":null,"lastUpdated":"2022-11-24T10:42:00.000Z"},{"notionID":"b34f2185-860f-46e4-adae-b6a824a7c06b","id":"2022-08-07-ray-tracing-in-one-weekend","icon":"🔆","tags":["rust"],"title":"『Ray Tracing in One Weekend』をやった","summary":"レイトレーシングを実装する","recordMap":null,"lastUpdated":"2022-08-09T11:35:00.000Z"},{"notionID":"9137f946-c9f2-495a-9465-e22c317717bf","id":"2022-08-09-infinite-turtle-brainfuck","icon":"🧠","tags":["game"],"title":"コンベアで計算する『Infinite Turtles』でBrainfuckインタプリタを実装した","summary":"ベルトコンベアでbrainfuckを計算する様子","recordMap":null,"lastUpdated":"2022-10-28T12:28:00.000Z"},{"notionID":"7b60f0a0-848e-40d5-be90-9f28d934fbb2","id":"2022-10-25-rust-c-compiler","icon":"🦀","tags":["rust","compiler"],"title":"Rustで「低レイヤを知りたい人のためのCコンパイラ作成入門」を少しやる","summary":"コンパイラ作りを思い出す","recordMap":null,"lastUpdated":"2022-10-25T09:06:00.000Z"},{"notionID":"02f7fec3-88ee-4275-bb46-057a81153eba","id":"2022-07-24-isucon12-qualified","icon":"🎉","tags":["isucon","web"],"title":"ISUCON12予選突破した。 :old_noto_innocent: ","summary":"ISUCON12予選突破できた。そのまとめ。","recordMap":null,"lastUpdated":"2022-07-28T02:00:00.000Z"},{"notionID":"8837459a-5a44-48f1-ba64-3764c7cd659b","id":"2022-08-08-inifinite-turtles","icon":"🐢","tags":["game"],"title":"自動化コンベアでチューリング完全を目指す『Infinite Turtles』の紹介","summary":"steamのゲームの紹介。ベルトコンベアでいろんな問題を解く。","recordMap":null,"lastUpdated":"2022-10-28T12:29:00.000Z"},{"notionID":"31901beb-64fe-4576-8211-e14654a1c0c7","id":"2022-07-13-notion-blog","icon":"📝","tags":["notion","nextjs"],"title":"Notionでもブログを書けるように","summary":"Notionからnextjsでブログを生成する","recordMap":null,"lastUpdated":"2022-08-09T04:45:00.000Z"}]},"__N_SSG":true}